<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">

<section class="product-page">
    <br>
    <div class="row mt-4">
        <div class="col-md-3">

        </div>
        <div class="col-md-8">
            <div class="container">
                <div class="row">
                    <div id="carouselExampleIndicators" class="carousel slide align-items-center"
                         data-bs-ride="carousel"
                         style="height: 600px; width: 300px">
                        <div class="carousel-inner">
                            <% images.forEach((image, index) => { %>
                                <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                                    <img class="d-block w-100" src="<%= image %>" alt="Slide <%= index + 1 %>">
                                </div>
                            <% }) %>
                        </div>
                        <a class="carousel-control-prev align-items-center" href="#carouselExampleIndicators"
                           role="button"
                           data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only"></span>
                        </a>
                        <a class="carousel-control-next align-items-center" href="#carouselExampleIndicators"
                           role="button"
                           data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only"></span>
                        </a>
                    </div>


                    <div class="col-lg-6">
                        <div class="product-content">
                            <h2><%= product.nome %></h2>
                            <h5>€ <%= product.prezzo %></h5>
                            <p><%= product.descrizione %></p>
                            <ul class="tags">
                                <li><span>Categoria: </span><%= product.categoria %></li>
                            </ul>
                            <% if(inCart) { %>
                                <a href="/cart/remove/<%= product.id %>"
                                   class="primary-btn pc-btn btn-remove" style="color: white">Rimuovi</a>
                            <% } else { %>
                                <a href="/cart/add/<%= product.id %>" class="primary-btn pc-btn">Add to cart</a>
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="related-product spad">
    <div class="container">
        <div class="product-filter">
            <div class="row">
                <div class=" text-center">
                    <h3>Prodotti consigliati</h3>
                </div>
            </div>
        </div>
        <div class="row">
            <% randomProducts.forEach((product, index) => { %>
                <a href="/product/<%= product.id %>" class="col-md-3 mb-4 text-decoration-none">
                    <div class="card product-card">
                        <div class="card-img-top text-center">
                            <img src="<%= product.foto_info %>" alt="<%= product.nome %>"
                                 class="img-fluid product-image">
                        </div>
                        <div class="card-body d-flex flex-column justify-content-end">
                            <h5 class="card-title text-center"><%= product.nome %></h5>
                            <p class="card-text text-center price">€ <%= product.prezzo %></p>
                        </div>
                    </div>
                </a>

                <% if ((index + 1) % 4 === 0) { %>
        </div>
        <div class="row">
            <% } %>
            <% }); %>
        </div>
    </div>
</section>

<script>
	document.addEventListener('DOMContentLoaded', (event) => {
		const carousel = new bootstrap.Carousel(document.getElementById('carouselExampleIndicators'), {
			interval: 2000
		});
	});
</script>